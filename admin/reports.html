<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analytics & Reports - Edu C2C Marketplace</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../assets/css/style.css">
    <style>
        .sidebar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }
        .sidebar .nav-link {
            color: rgba(255, 255, 255, 0.8);
            border-radius: 8px;
            margin: 2px 0;
            transition: all 0.3s ease;
        }
        .sidebar .nav-link:hover, .sidebar .nav-link.active {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }
        .admin-header {
            background: white;
            border-bottom: 1px solid #e9ecef;
        }
        .metric-card {
            transition: all 0.3s ease;
            border: none;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        }
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .chart-container {
            position: relative;
            height: 300px;
        }
        .kpi-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        .trend-up {
            color: #28a745;
        }
        .trend-down {
            color: #dc3545;
        }
        .filter-card {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 10px;
            padding: 1rem;
        }
    </style>
</head>
<body>
    <div class="d-flex">
        <!-- Sidebar -->
        <div class="sidebar flex-shrink-0 p-3" style="width: 280px;">
            <a href="#" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                <i class="fas fa-handshake me-2"></i>
                <span class="fs-4">Admin Portal</span>
            </a>
            <hr>
            <ul class="nav nav-pills flex-column mb-auto">
                <li class="nav-item">
                    <a href="dashboard.html" class="nav-link">
                        <i class="fas fa-tachometer-alt me-2"></i>
                        Dashboard
                    </a>
                </li>
                <li>
                    <a href="listings.php" class="nav-link">
                        <i class="fas fa-list me-2"></i>
                        Listings
                    </a>
                </li>
                <li>
                    <a href="users.html" class="nav-link">
                        <i class="fas fa-users me-2"></i>
                        Users
                    </a>
                </li>
                <li>
                    <a href="transactions.html" class="nav-link">
                        <i class="fas fa-exchange-alt me-2"></i>
                        Transactions
                    </a>
                </li>
                <li>
                    <a href="reports.html" class="nav-link active">
                        <i class="fas fa-chart-bar me-2"></i>
                        Reports
                    </a>
                </li>
                <li>
                    <a href="settings.html" class="nav-link">
                        <i class="fas fa-cog me-2"></i>
                        Settings
                    </a>
                </li>
            </ul>
            <hr>
            <div class="dropdown">
                <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
                    <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Admin" width="32" height="32" class="rounded-circle me-2">
                    <strong>Admin User</strong>
                </a>
                <ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1">
                    <li><a class="dropdown-item" href="#">Profile</a></li>
                    <li><a class="dropdown-item" href="#">Settings</a></li>
                    <li><hr class="dropdown-divider"></li>
                    <li><a class="dropdown-item" href="#">Sign out</a></li>
                </ul>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-grow-1">
            <!-- Admin Header -->
            <header class="admin-header py-3 px-4 d-flex justify-content-between align-items-center">
                <div>
                    <h4 class="mb-0">Analytics & Reports</h4>
                    <small class="text-muted">Insights into platform performance and user behavior</small>
                </div>
                <div>
                    <button class="btn btn-sm btn-outline-secondary me-2">
                        <i class="fas fa-bell"></i>
                        <span class="badge bg-danger badge-sm">2</span>
                    </button>
                    <button class="btn btn-sm btn-outline-secondary">
                        <i class="fas fa-question-circle"></i>
                    </button>
                </div>
            </header>

            <!-- Admin Content -->
            <main class="p-4">
                <!-- Filters -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="filter-card">
                            <div class="row align-items-center">
                                <div class="col-md-3">
                                    <label class="form-label">Date Range</label>
                                    <select class="form-select" id="dateRange">
                                        <option value="today">Today</option>
                                        <option value="yesterday">Yesterday</option>
                                        <option value="last_7_days" selected>Last 7 Days</option>
                                        <option value="last_30_days">Last 30 Days</option>
                                        <option value="this_month">This Month</option>
                                        <option value="last_month">Last Month</option>
                                        <option value="custom">Custom Range</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">Location</label>
                                    <select class="form-select" id="locationFilter">
                                        <option value="all" selected>All Locations</option>
                                        <option value="johannesburg">Johannesburg</option>
                                        <option value="cape_town">Cape Town</option>
                                        <option value="durban">Durban</option>
                                        <option value="pretoria">Pretoria</option>
                                    </select>
                                </div>
                                <div class="col-md-3">
                                    <label class="form-label">User Type</label>
                                    <select class="form-select" id="userTypeFilter">
                                        <option value="all" selected>All Users</option>
                                        <option value="buyers">Buyers Only</option>
                                        <option value="sellers">Sellers Only</option>
                                        <option value="verified">Verified Users</option>
                                    </select>
                                </div>
                                <div class="col-md-3 d-flex align-items-end">
                                    <button class="btn btn-primary me-2" id="applyFilters">
                                        <i class="fas fa-filter me-1"></i> Apply
                                    </button>
                                    <button class="btn btn-outline-secondary" id="exportReport">
                                        <i class="fas fa-download me-1"></i> Export
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Key Performance Indicators -->
                <div class="row mb-4">
                    <div class="col-lg-3 col-md-6 mb-3">
                        <div class="kpi-card text-center">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <i class="fas fa-users fa-2x opacity-75"></i>
                                <span class="trend-up"><i class="fas fa-arrow-up"></i> 12.5%</span>
                            </div>
                            <h3 class="mb-1">15,847</h3>
                            <p class="mb-0 opacity-75">Total Users</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 mb-3">
                        <div class="kpi-card text-center">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <i class="fas fa-list fa-2x opacity-75"></i>
                                <span class="trend-up"><i class="fas fa-arrow-up"></i> 8.3%</span>
                            </div>
                            <h3 class="mb-1">3,264</h3>
                            <p class="mb-0 opacity-75">Active Listings</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 mb-3">
                        <div class="kpi-card text-center">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <i class="fas fa-coins fa-2x opacity-75"></i>
                                <span class="trend-up"><i class="fas fa-arrow-up"></i> 15.2%</span>
                            </div>
                            <h3 class="mb-1">R2.8M</h3>
                            <p class="mb-0 opacity-75">Total Revenue</p>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6 mb-3">
                        <div class="kpi-card text-center">
                            <div class="d-flex justify-content-between align-items-center mb-2">
                                <i class="fas fa-percentage fa-2x opacity-75"></i>
                                <span class="trend-down"><i class="fas fa-arrow-down"></i> 2.1%</span>
                            </div>
                            <h3 class="mb-1">94.2%</h3>
                            <p class="mb-0 opacity-75">Success Rate</p>
                        </div>
                    </div>
                </div>

                <!-- Charts Row 1 -->
                <div class="row mb-4">
                    <div class="col-lg-8">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">Revenue Trends</h6>
                                <div class="btn-group btn-group-sm" role="group">
                                    <input type="radio" class="btn-check" name="revenueChart" id="daily" checked>
                                    <label class="btn btn-outline-primary" for="daily">Daily</label>
                                    
                                    <input type="radio" class="btn-check" name="revenueChart" id="weekly">
                                    <label class="btn btn-outline-primary" for="weekly">Weekly</label>
                                    
                                    <input type="radio" class="btn-check" name="revenueChart" id="monthly">
                                    <label class="btn btn-outline-primary" for="monthly">Monthly</label>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="revenueChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-white">
                                <h6 class="mb-0">Geographic Distribution</h6>
                            </div>
                            <div class="card-body">
                                <canvas id="locationChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Row 2 -->
                <div class="row mb-4">
                    <div class="col-lg-6">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h6 class="mb-0">User Growth</h6>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="userGrowthChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h6 class="mb-0">Category Performance</h6>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="categoryChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Detailed Analytics Tables -->
                <div class="row mb-4">
                    <div class="col-lg-6">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h6 class="mb-0">Top Performing Categories</h6>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-sm">
                                        <thead>
                                            <tr>
                                                <th>Category</th>
                                                <th>Listings</th>
                                                <th>Revenue</th>
                                                <th>Growth</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <i class="fas fa-apple-alt text-success me-2"></i>
                                                    Fresh Produce
                                                </td>
                                                <td>1,247</td>
                                                <td>R847,230</td>
                                                <td><span class="trend-up">+15.3%</span></td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <i class="fas fa-paint-brush text-primary me-2"></i>
                                                    Handicrafts
                                                </td>
                                                <td>892</td>
                                                <td>R523,150</td>
                                                <td><span class="trend-up">+8.7%</span></td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <i class="fas fa-tshirt text-info me-2"></i>
                                                    Clothing
                                                </td>
                                                <td>654</td>
                                                <td>R398,720</td>
                                                <td><span class="trend-up">+12.1%</span></td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <i class="fas fa-mobile-alt text-warning me-2"></i>
                                                    Electronics
                                                </td>
                                                <td>471</td>
                                                <td>R892,340</td>
                                                <td><span class="trend-down">-2.4%</span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h6 class="mb-0">Top Sellers by Revenue</h6>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-sm">
                                        <thead>
                                            <tr>
                                                <th>Seller</th>
                                                <th>Sales</th>
                                                <th>Revenue</th>
                                                <th>Rating</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <img src="https://randomuser.me/api/portraits/women/44.jpg" class="rounded-circle me-2" width="25" height="25" alt="">
                                                        <span>Nomsa D.</span>
                                                        <i class="fas fa-check-circle text-primary ms-1" title="Verified"></i>
                                                    </div>
                                                </td>
                                                <td>234</td>
                                                <td>R58,430</td>
                                                <td>
                                                    <div class="text-warning">
                                                        <i class="fas fa-star"></i> 4.9
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <img src="https://randomuser.me/api/portraits/men/32.jpg" class="rounded-circle me-2" width="25" height="25" alt="">
                                                        <span>Thabo M.</span>
                                                        <i class="fas fa-check-circle text-primary ms-1" title="Verified"></i>
                                                    </div>
                                                </td>
                                                <td>187</td>
                                                <td>R45,670</td>
                                                <td>
                                                    <div class="text-warning">
                                                        <i class="fas fa-star"></i> 4.8
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <img src="https://randomuser.me/api/portraits/women/68.jpg" class="rounded-circle me-2" width="25" height="25" alt="">
                                                        <span>Lerato K.</span>
                                                    </div>
                                                </td>
                                                <td>156</td>
                                                <td>R38,920</td>
                                                <td>
                                                    <div class="text-warning">
                                                        <i class="fas fa-star"></i> 4.7
                                                    </div>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <img src="https://randomuser.me/api/portraits/men/65.jpg" class="rounded-circle me-2" width="25" height="25" alt="">
                                                        <span>Sipho N.</span>
                                                        <i class="fas fa-check-circle text-primary ms-1" title="Verified"></i>
                                                    </div>
                                                </td>
                                                <td>143</td>
                                                <td>R34,560</td>
                                                <td>
                                                    <div class="text-warning">
                                                        <i class="fas fa-star"></i> 4.6
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Informal Economy Insights -->
                <div class="row mb-4">
                    <div class="col-12">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h6 class="mb-0"><i class="fas fa-chart-line me-2"></i>Informal Economy Impact Metrics</h6>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-lg-3 col-md-6 mb-3">
                                        <div class="text-center p-3 border rounded">
                                            <h4 class="text-primary">2,847</h4>
                                            <p class="mb-0 text-muted">Informal Traders Empowered</p>
                                            <small class="text-success"><i class="fas fa-arrow-up"></i> +18.2% vs last month</small>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-6 mb-3">
                                        <div class="text-center p-3 border rounded">
                                            <h4 class="text-success">R1.2M</h4>
                                            <p class="mb-0 text-muted">Income Generated for Sellers</p>
                                            <small class="text-success"><i class="fas fa-arrow-up"></i> +24.7% vs last month</small>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-6 mb-3">
                                        <div class="text-center p-3 border rounded">
                                            <h4 class="text-warning">67%</h4>
                                            <p class="mb-0 text-muted">First-time Digital Sellers</p>
                                            <small class="text-info"><i class="fas fa-info-circle"></i> New to online commerce</small>
                                        </div>
                                    </div>
                                    <div class="col-lg-3 col-md-6 mb-3">
                                        <div class="text-center p-3 border rounded">
                                            <h4 class="text-info">156</h4>
                                            <p class="mb-0 text-muted">Workshop Attendees</p>
                                            <small class="text-success"><i class="fas fa-arrow-up"></i> +42% completion rate</small>
                                        </div>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6>Digital Literacy Progress</h6>
                                        <div class="progress mb-2">
                                            <div class="progress-bar bg-success" style="width: 78%"></div>
                                        </div>
                                        <small class="text-muted">78% of sellers now use digital payments</small>
                                    </div>
                                    <div class="col-md-6">
                                        <h6>Market Reach Expansion</h6>
                                        <div class="progress mb-2">
                                            <div class="progress-bar bg-primary" style="width: 85%"></div>
                                        </div>
                                        <small class="text-muted">85% of sellers report expanded customer base</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mobile Usage Statistics -->
                <div class="row mb-4">
                    <div class="col-lg-4">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h6 class="mb-0">Device Usage</h6>
                            </div>
                            <div class="card-body">
                                <canvas id="deviceChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h6 class="mb-0">Payment Methods</h6>
                            </div>
                            <div class="card-body">
                                <canvas id="paymentChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-4">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white">
                                <h6 class="mb-0">Data Usage Mode</h6>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between mb-1">
                                        <span>Low Data Mode Users</span>
                                        <span class="fw-bold">42%</span>
                                    </div>
                                    <div class="progress" style="height: 10px;">
                                        <div class="progress-bar bg-warning" style="width: 42%"></div>
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <div class="d-flex justify-content-between mb-1">
                                        <span>Standard Mode Users</span>
                                        <span class="fw-bold">58%</span>
                                    </div>
                                    <div class="progress" style="height: 10px;">
                                        <div class="progress-bar bg-primary" style="width: 58%"></div>
                                    </div>
                                </div>
                                <small class="text-muted">
                                    <i class="fas fa-info-circle me-1"></i>
                                    Low data mode saves 67% on average data consumption
                                </small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Activity Log -->
                <div class="row">
                    <div class="col-12">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-white d-flex justify-content-between align-items-center">
                                <h6 class="mb-0">Recent Platform Activity</h6>
                                <button class="btn btn-sm btn-outline-primary">View All Activities</button>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>Time</th>
                                                <th>Event</th>
                                                <th>User</th>
                                                <th>Location</th>
                                                <th>Impact</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>10:45</td>
                                                <td>
                                                    <span class="badge bg-success">New Sale</span>
                                                    Fresh Vegetables purchased
                                                </td>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <img src="https://randomuser.me/api/portraits/men/22.jpg" class="rounded-circle me-2" width="25" height="25" alt="">
                                                        Thabo M.
                                                    </div>
                                                </td>
                                                <td>Johannesburg</td>
                                                <td class="text-success">+R120</td>
                                            </tr>
                                            <tr>
                                                <td>10:30</td>
                                                <td>
                                                    <span class="badge bg-primary">New User</span>
                                                    Seller registration completed
                                                </td>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <img src="https://randomuser.me/api/portraits/women/35.jpg" class="rounded-circle me-2" width="25" height="25" alt="">
                                                        Sarah K.
                                                    </div>
                                                </td>
                                                <td>Cape Town</td>
                                                <td class="text-primary">+1 User</td>
                                            </tr>
                                            <tr>
                                                <td>10:15</td>
                                                <td>
                                                    <span class="badge bg-info">Workshop</span>
                                                    Digital literacy session completed
                                                </td>
                                                <td>15 Participants</td>
                                                <td>Soweto</td>
                                                <td class="text-info">+15 Trained</td>
                                            </tr>
                                            <tr>
                                                <td>09:50</td>
                                                <td>
                                                    <span class="badge bg-warning">Barter</span>
                                                    Trade exchange completed
                                                </td>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <img src="https://randomuser.me/api/portraits/men/45.jpg" class="rounded-circle me-2" width="25" height="25" alt="">
                                                        David M.
                                                    </div>
                                                </td>
                                                <td>Pretoria</td>
                                                <td class="text-warning">~R200</td>
                                            </tr>
                                            <tr>
                                                <td>09:30</td>
                                                <td>
                                                    <span class="badge bg-success">Verification</span>
                                                    Seller account verified
                                                </td>
                                                <td>
                                                    <div class="d-flex align-items-center">
                                                        <img src="https://randomuser.me/api/portraits/women/28.jpg" class="rounded-circle me-2" width="25" height="25" alt="">
                                                        Maria L.
                                                    </div>
                                                </td>
                                                <td>Durban</td>
                                                <td class="text-success">Trust +</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Export Modal -->
    <div class="modal fade" id="exportModal" tabindex="-1" aria-labelledby="exportModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exportModalLabel">Export Report</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Report Type</label>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="reportType" id="financialReport" value="financial" checked>
                            <label class="form-check-label" for="financialReport">Financial Summary</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="reportType" id="userReport" value="user">
                            <label class="form-check-label" for="userReport">User Analytics</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="reportType" id="listingReport" value="listing">
                            <label class="form-check-label" for="listingReport">Listing Performance</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="radio" name="reportType" id="impactReport" value="impact">
                            <label class="form-check-label" for="impactReport">Social Impact Report</label>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="exportFormat" class="form-label">Format</label>
                        <select class="form-select" id="exportFormat">
                            <option value="pdf">PDF Report</option>
                            <option value="excel">Excel Spreadsheet</option>
                            <option value="csv">CSV Data</option>
                            <option value="powerpoint">PowerPoint Presentation</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="reportPeriod" class="form-label">Period</label>
                        <select class="form-select" id="reportPeriod">
                            <option value="current">Current Period</option>
                            <option value="last_week">Last Week</option>
                            <option value="last_month">Last Month</option>
                            <option value="last_quarter">Last Quarter</option>
                            <option value="custom">Custom Range</option>
                        </select>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="includeCharts" checked>
                        <label class="form-check-label" for="includeCharts">
                            Include charts and visualizations
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary">Generate Report</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Custom JS -->
    <script src="../assets/js/main.js"></script>
    <script>
        // Revenue Chart
        const revenueCtx = document.getElementById('revenueChart').getContext('2d');
        const revenueChart = new Chart(revenueCtx, {
            type: 'line',
            data: {
                labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                datasets: [{
                    label: 'Revenue (R)',
                    data: [12000, 15000, 18000, 14000, 22000, 25000, 20000],
                    borderColor: '#667eea',
                    backgroundColor: 'rgba(102, 126, 234, 0.1)',
                    fill: true,
                    tension: 0.4
                }, {
                    label: 'Transactions',
                    data: [45, 52, 63, 48, 78, 85, 72],
                    borderColor: '#764ba2',
                    backgroundColor: 'rgba(118, 75, 162, 0.1)',
                    fill: true,
                    tension: 0.4,
                    yAxisID: 'y1'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        type: 'linear',
                        display: true,
                        position: 'left',
                    },
                    y1: {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        grid: {
                            drawOnChartArea: false,
                        },
                    }
                },
                plugins: {
                    legend: {
                        position: 'top',
                    }
                }
            }
        });

        // Location Chart
        const locationCtx = document.getElementById('locationChart').getContext('2d');
        const locationChart = new Chart(locationCtx, {
            type: 'doughnut',
            data: {
                labels: ['Johannesburg', 'Cape Town', 'Durban', 'Pretoria', 'Other'],
                datasets: [{
                    data: [35, 25, 18, 12, 10],
                    backgroundColor: [
                        '#667eea',
                        '#764ba2',
                        '#f093fb',
                        '#f5576c',
                        '#4facfe'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                    }
                }
            }
        });

        // User Growth Chart
        const userGrowthCtx = document.getElementById('userGrowthChart').getContext('2d');
        const userGrowthChart = new Chart(userGrowthCtx, {
            type: 'bar',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                datasets: [{
                    label: 'New Buyers',
                    data: [120, 150, 180, 200, 175, 220],
                    backgroundColor: '#667eea'
                }, {
                    label: 'New Sellers',
                    data: [80, 95, 110, 125, 140, 160],
                    backgroundColor: '#764ba2'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        stacked: true
                    },
                    y: {
                        stacked: true
                    }
                }
            }
        });

        // Category Chart
        const categoryCtx = document.getElementById('categoryChart').getContext('2d');
        const categoryChart = new Chart(categoryCtx, {
            type: 'radar',
            data: {
                labels: ['Produce', 'Handicrafts', 'Clothing', 'Electronics', 'Home Goods'],
                datasets: [{
                    label: 'Sales Volume',
                    data: [85, 70, 60, 45, 55],
                    borderColor: '#667eea',
                    backgroundColor: 'rgba(102, 126, 234, 0.2)'
                }, {
                    label: 'User Satisfaction',
                    data: [90, 85, 75, 80, 70],
                    borderColor: '#764ba2',
                    backgroundColor: 'rgba(118, 75, 162, 0.2)'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100
                    }
                }
            }
        });

        // Device Chart
        const deviceCtx = document.getElementById('deviceChart').getContext('2d');
        const deviceChart = new Chart(deviceCtx, {
            type: 'pie',
            data: {
                labels: ['Mobile', 'Desktop', 'Tablet'],
                datasets: [{
                    data: [78, 18, 4],
                    backgroundColor: ['#667eea', '#764ba2', '#f093fb']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                    }
                }
            }
        });

        // Payment Chart
        const paymentCtx = document.getElementById('paymentChart').getContext('2d');
        const paymentChart = new Chart(paymentCtx, {
            type: 'doughnut',
            data: {
                labels: ['Mobile Money', 'Cash', 'Bank Transfer', 'Barter'],
                datasets: [{
                    data: [45, 30, 20, 5],
                    backgroundColor: ['#28a745', '#17a2b8', '#6f42c1', '#fd7e14']
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                    }
                }
            }
        });

        // Filter functionality
        document.getElementById('applyFilters').addEventListener('click', function() {
            // Simulate applying filters
            showToast('Filters applied successfully', 'success');
            // In a real application, this would update all charts with filtered data
        });

        // Export functionality
        document.getElementById('exportReport').addEventListener('click', function() {
            const modal = new bootstrap.Modal(document.getElementById('exportModal'));
            modal.show();
        });

        // Export modal handler
        document.querySelector('#exportModal .btn-primary').addEventListener('click', function() {
            const modal = bootstrap.Modal.getInstance(document.getElementById('exportModal'));
            modal.hide();
            showToast('Report generation started. You will receive an email when ready.', 'info');
        });

        // Toast notification function
        function showToast(message, type = 'info') {
            const toastContainer = document.createElement('div');
            toastContainer.className = 'toast-container position-fixed top-0 end-0 p-3';
            toastContainer.style.zIndex = '9999';
            
            const toast = document.createElement('div');
            toast.className = `toast align-items-center text-white bg-${type === 'success' ? 'success' : type === 'error' ? 'danger' : 'primary'} border-0`;
            toast.setAttribute('role', 'alert');
            toast.innerHTML = `
                <div class="d-flex">
                    <div class="toast-body">${message}</div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
                </div>
            `;
            
            toastContainer.appendChild(toast);
            document.body.appendChild(toastContainer);
            
            const bsToast = new bootstrap.Toast(toast);
            bsToast.show();
            
            toast.addEventListener('hidden.bs.toast', () => {
                toastContainer.remove();
            });
        }

        // Chart type toggle for revenue chart
        document.querySelectorAll('input[name="revenueChart"]').forEach(radio => {
            radio.addEventListener('change', function() {
                // Simulate chart data update
                if (this.value === 'daily') {
                    revenueChart.data.labels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];
                    revenueChart.data.datasets[0].data = [12000, 15000, 18000, 14000, 22000, 25000, 20000];
                } else if (this.value === 'weekly') {
                    revenueChart.data.labels = ['Week 1', 'Week 2', 'Week 3', 'Week 4'];
                    revenueChart.data.datasets[0].data = [85000, 95000, 78000, 102000];
                } else if (this.value === 'monthly') {
                    revenueChart.data.labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
                    revenueChart.data.datasets[0].data = [350000, 420000, 385000, 465000, 510000, 480000];
                }
                revenueChart.update();
            });
        });
    </script>
</body>
</html>